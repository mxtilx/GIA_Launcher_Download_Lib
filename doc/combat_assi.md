# 自动战斗辅助

## 简介

- 位置：`config/settings/tactic`

- 自动战斗辅助可以按照设定的角色、策略、优先级、触发条件等自动切换角色和执行攻击，使用元素战技和元素爆发。

- 适用于不需要手动瞄准的角色并配合护盾角色使用。（要瞄准的勉强也能用，只是勉强）

- 需要原神以1080p窗口化运行。不建议设置色彩滤镜。

- 需要设置`team.json`文件，设置方法如下所示。

## 策略组 tactic_group

自动战斗辅助支持以下策略：

| 策略关键字         | 说明                             |
|---------------|--------------------------------|
| `>`           | 立刻跳转至下一组                       |
| `@e?A:B`      | 元素战技是否生效。生效执行A，否则执行B。          |
| `e?A:B`       | 元素战技是否就绪。就绪执行A，否则执行B。          |
| `q?A:B`       | 元素爆发是否就绪。就绪执行A，否则执行B。          |
| `#@e?A:B`     | 元素战技是否正在持续，如果正在持续，循环执行A,否则执行B。 |
| `#@q?A:B`     | 元素爆发是否正在持续，如果正在持续，循环执行A,否则执行B。 |
| `a`/`a~`/`da` | 普通攻击/重击/下落攻击                   |
| `e`/`e~`      | 使用元素战技（点按/长按）                  |
| `j`           | 跳跃                             |
| `ja`          | 跳跃攻击                           |
| `sp`          | 冲刺                             |
| 数字            | 延时，单位为`毫秒`                     |

每个策略关键字用`,`分隔；不同策略组用`;`分隔。当一组策略执行完毕后，执行下一个策略组。

注意：

- 瞄准射箭的角色可以用重击代替。
- 自动瞄准在射箭蓄力状态下，会被巨大的蓄力特效所干扰，导致识别混乱。所以尽量少使用单体伤害弓箭类角色，甘雨等范围伤害角色除外。
- 不能添加空格。

- 在判断表达式中，策略关键字之间用`.`分隔。
- 在判断表达式中，策略关键字之间用`.`分隔。
- 在判断表达式中，策略关键字之间用`.`分隔。

含有`?`的策略关键字用法与三元运算符相近，如：

`@e?e:a;`：当元素战技准备时执行e，否则执行a。

`@e?e.a.a:none;`：当元素战技准备时执行`e,a,a`，否则不执行。

其中，`none` 可以为其他任何无意义字符，表示不执行任何动作。

注意：

- 判断表达式中，不能嵌套判断表达式；
- 判断表达式最好以分号结束，后面不再接策略关键字。

示例：

| 角色      | 策略                   |
|---------|----------------------|
| zhongli | `e?e~:none;q?q:none` |
| yunjin  | `e?e~:none;q?q:none` |
| yoimiya | `e?e:none;#@e?a:q;`  |

## 触发器 trigger

触发器条件成立时，允许切换至该角色。

| 触发器       | 说明                 |
|-----------|--------------------|
| `e_ready` | 当角色的元素战技准备就绪时，可以切换 |
| `q_ready` | 当角色的元素爆发准备就绪时，可以切换 |
| `idle`    | 始终触发               |

目前版本暂不支持多触发器。
当多个角色的触发条件成立时，切换角色的顺序由优先级决定。

## 优先级 priority

优先级从小到大依次降低，0为最高优先级。
优先级可以同级。

## 其他设置

| 设置项               | 介绍                       |
|-------------------|--------------------------|
| `Elast_time`      | E技能持续时间，没有则为0            |
| `Qlast_time`      | Q技能持续时间，没有则为0            |
| `E_short_cd_time` | 短Ecd时间，不能为0              |
| `Epress_time`     | 长按E的时间，没有则为0             |
| `E_long_cd_time`  | 长Ecd时间，没有则为0             |
| `Qcd_time`| Q技能冷却时间|
| `n`               | 角色在队伍中的位置（1~4），不可重复，不可为0 |

## 自动配置team文件

在`character.json`文件中有一些已经配置好的角色,此时在`team.json`文件中只需要将`autofill`设置为`true`,并配置`name`
,`priority`,`n`,`trigger`即可。
在`character.json`中的`verify`属性可以查看该角色操作是否被验证通过。

- 注：该方法可用，但目前暂不推荐。适用于有多个队伍时避免重复配置。

## 角色元素战技、元素爆发图片设置

自新版本起，无需设置图片。

## 其他注意事项

- 角色名称可在`config/character_dist.json`中查找，每个角色的首项即为该角色名称，其余为角色别名，如：

`["albedo","Albedo","阿贝多","アルベド"]`中，角色名称为`albedo`，其他为别名。

- 角色血量过低或有角色死亡时，程序可能暂停运行。
- 不在合适的界面时，程序可能暂停运行。

由于~~是个非酋~~能力有限，角色较少，上述配置并非最优方案，如果你有更好的方案，随时`issue`

如果遇到无法解决的问题，也可提交`issue`。

如果有好的角色输出手法可以发`issue`或者在q群分享~

## team.json文件示例

你可以基于自己的需求在`示例json`中修改，或者新建新的`json`并将`auto_combat.json`中的
`teamfile`修改为你自己的`json`.

文件示例：

[文件示例1 宵宫 钟离 班尼特 云堇](./team_example1.json)

[文件示例2 凝光 钟离 班尼特 云堇](./team_example2.json)

[文件示例3 凌人 钟离 班尼特 纳西妲](./team_example3.json)

在tactic文件夹中也有该示例文件。
